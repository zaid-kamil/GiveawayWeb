{% extends 'index.html' %}
{% load staticfiles %}

{$ {% block cssblock %}
    <style>


        .mdl-button.mdl-button--twitter {
            color: #3f51b5;
        }

        .mdl-button.mdl-button--twitter:focus:not(:active) {
            background-color: #00acee;
        }

        .mdl-button--raised.mdl-button--twitter {
            background: #00acee;
            color: white;
        }

        .mdl-button--raised.mdl-button--twitter:hover {
            background-color: #00acee;
        }

        .mdl-button--raised.mdl-button--twitter:active {
            background-color: #00acee;
        }

        .mdl-button--raised.mdl-button--twitter:focus:not(:active) {
            background-color: #00acee;
        }

        .mdl-button--raised.mdl-button--twitter .mdl-ripple {
            background: white;
        }

        .mdl-button--fab.mdl-button--twitter {
            background: #00acee;
            color: white;
        }

        .mdl-button--fab.mdl-button--twitter:hover {
            background-color: #00acee;
        }

        .mdl-button--fab.mdl-button--twitter:focus:not(:active) {
            background-color: #00acee;
        }

        .mdl-button--fab.mdl-button--twitter:active {
            background-color: #00acee;
        }

        .mdl-button--fab.mdl-button--twitter .mdl-ripple {
            background: white;
        }

        .mdl-button.mdl-button--facebook {
            color: #3f51b5;
        }

        .mdl-button.mdl-button--facebook:focus:not(:active) {
            background-color: #3b5998;
        }

        .mdl-button--raised.mdl-button--facebook {
            background: #3b5998;
            color: white;
        }

        .mdl-button--raised.mdl-button--facebook:hover {
            background-color: #3b5998;
        }

        .mdl-button--raised.mdl-button--facebook:active {
            background-color: #3b5998;
        }

        .mdl-button--raised.mdl-button--facebook:focus:not(:active) {
            background-color: #3b5998;
        }

        .mdl-button--raised.mdl-button--facebook .mdl-ripple {
            background: white;
        }

        .mdl-button--fab.mdl-button--facebook {
            background: #3b5998;
            color: white;
        }

        .mdl-button--fab.mdl-button--facebook:hover {
            background-color: #3b5998;
        }

        .mdl-button--fab.mdl-button--facebook:focus:not(:active) {
            background-color: #3b5998;
        }

        .mdl-button--fab.mdl-button--facebook:active {
            background-color: #3b5998;
        }

        .mdl-button--fab.mdl-button--facebook .mdl-ripple {
            background: white;
        }

        .mdl-button.mdl-button--googleplus {
            color: #3f51b5;
        }

        .mdl-button.mdl-button--googleplus:focus:not(:active) {
            background-color: #e93f2e;
        }

        .mdl-button--raised.mdl-button--googleplus {
            background: #e93f2e;
            color: white;
        }

        .mdl-button--raised.mdl-button--googleplus:hover {
            background-color: #e93f2e;
        }

        .mdl-button--raised.mdl-button--googleplus:active {
            background-color: #e93f2e;
        }

        .mdl-button--raised.mdl-button--googleplus:focus:not(:active) {
            background-color: #e93f2e;
        }

        .mdl-button--raised.mdl-button--googleplus .mdl-ripple {
            background: white;
        }

        .mdl-button--fab.mdl-button--googleplus {
            background: #e93f2e;
            color: white;
        }

        .mdl-button--fab.mdl-button--googleplus:hover {
            background-color: #e93f2e;
        }

        .mdl-button--fab.mdl-button--googleplus:focus:not(:active) {
            background-color: #e93f2e;
        }

        .mdl-button--fab.mdl-button--googleplus:active {
            background-color: #e93f2e;
        }

        .mdl-button--fab.mdl-button--googleplus .mdl-ripple {
            background: white;
        }

        .mdl-button.mdl-button--stumbleupon {
            color: #3f51b5;
        }

        .mdl-button.mdl-button--stumbleupon:focus:not(:active) {
            background-color: #f74425;
        }

        .mdl-button--raised.mdl-button--stumbleupon {
            background: #f74425;
            color: white;
        }

        .mdl-button--raised.mdl-button--stumbleupon:hover {
            background-color: #f74425;
        }

        .mdl-button--raised.mdl-button--stumbleupon:active {
            background-color: #f74425;
        }

        .mdl-button--raised.mdl-button--stumbleupon:focus:not(:active) {
            background-color: #f74425;
        }

        .mdl-button--raised.mdl-button--stumbleupon .mdl-ripple {
            background: white;
        }

        .mdl-button--fab.mdl-button--stumbleupon {
            background: #f74425;
            color: white;
        }

        .mdl-button--fab.mdl-button--stumbleupon:hover {
            background-color: #f74425;
        }

        .mdl-button--fab.mdl-button--stumbleupon:focus:not(:active) {
            background-color: #f74425;
        }

        .mdl-button--fab.mdl-button--stumbleupon:active {
            background-color: #f74425;
        }

        .mdl-button--fab.mdl-button--stumbleupon .mdl-ripple {
            background: white;
        }

        .mdl-button.mdl-button--linkedin {
            color: #3f51b5;
        }

        .mdl-button.mdl-button--linkedin:focus:not(:active) {
            background-color: #0e76a8;
        }

        .mdl-button--raised.mdl-button--linkedin {
            background: #0e76a8;
            color: white;
        }

        .mdl-button--raised.mdl-button--linkedin:hover {
            background-color: #0e76a8;
        }

        .mdl-button--raised.mdl-button--linkedin:active {
            background-color: #0e76a8;
        }

        .mdl-button--raised.mdl-button--linkedin:focus:not(:active) {
            background-color: #0e76a8;
        }

        .mdl-button--raised.mdl-button--linkedin .mdl-ripple {
            background: white;
        }

        .mdl-button--fab.mdl-button--linkedin {
            background: #0e76a8;
            color: white;
        }

        .mdl-button--fab.mdl-button--linkedin:hover {
            background-color: #0e76a8;
        }

        .mdl-button--fab.mdl-button--linkedin:focus:not(:active) {
            background-color: #0e76a8;
        }

        .mdl-button--fab.mdl-button--linkedin:active {
            background-color: #0e76a8;
        }

        .mdl-button--fab.mdl-button--linkedin .mdl-ripple {
            background: white;
        }

        main.mdl-layout__content {
            background-image: url("{% static 'assets/bg_main.jpg' %}");
        }

    .comment-block{
        padding: 20px;
    }


    </style>
{% endblock %}
{% block contentblock %}
    <div class="mdl-grid">
        <div class="mdl-shadow--4dp mdl-card mdl-color--yellow-500  mdl-cell mdl-cell--6-col">

            <div class="mdl-card__title mdl-card--expand mdl-color--amber-900"
                 style="background-image: url('{{ item.image.url }}') ;background-position: center; height: 200px;">
                <h1 class="mdl-card__title-text mdl-color-text--white"><b>{{ item.g_name }}</b>
                </h1>

            </div>
            <div class="mdl-card__supporting-text meta mdl-color-text--grey-600">
                <button class="mdl-button--fab mdl-button mdl-color--accent ent"> {{ item.entries }}</button>
                entries
                <div>
                    <br>
                    ending on
                    <button class="mdl-button mdl-button--colored"><i class=""></i>{{ item.ending_time }}</button>
                    <br>

                    <h6>summary : {{ item.description }}</h6>
                </div>

                <div class="">

                    <!-- Twitter -->
                    <a href="http://twitter.com/home?status=" title="Share on Twitter" target="_blank"
                       class="share1 mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--twitter"><i
                            class="fa fa-twitter fa-fw"></i> Twitter <span class="s"></span></a>
                    <!-- Facebook -->
                    <a href="https://www.facebook.com/sharer/sharer.php?u=" title="Share on Facebook" target="_blank"
                       class="share2  mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--facebook"><i
                            class="fa fa-facebook fa-fw"></i> Facebook <span class="s"></span></a>
                    <!-- Google+ -->
                    <a href=" https://plus.google.com/share?url=" title="Share on Google+" target="_blank"
                       class="share3 mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--googleplus"><i
                            class="fa fa-google-plus fa-fw"></i> Google+ <span class="s"></span></a>
                    <!-- StumbleUpon -->

                    <a href="http://www.stumbleupon.com/submit?url=" title="Share on StumbleUpon"
                       target="_blank" data-placement="top"
                       class="share4 mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--stumbleupon"><i
                            class="fa fa-stumbleupon fa-fw"></i> Stumbleupon <span class="s"></span></a>
                    <!-- LinkedIn -->
                    <a href="http://www.linkedin.com/shareArticle?mini=true&url=&title=&summary="
                       title=" Share on LinkedIn" target="_blank"
                       class="share5 mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--linkedin"><i
                            class="fa fa-linkedin fa-fw"></i> LinkedIn <span class="s"></span></a>
                </div>
                <div class="mdl-card__supporting-text resp"></div>
            </div>
        </div>
        <div class="mdl-shadow--4dp mdl-card mdl-color--green-300  mdl-cell mdl-cell--6-col ">
            <div class="comment-block">
                <h2 class="mdl-card__title-text point">total entries by user {{ entry.total_points }}</h2>
            </div>
            <div class="comment-block">

                {% if request.user.is_authenticated %}
                    <form method="POST" action="{{ request.path }}"> {% csrf_token %}
                        <div class="mdl-textfield mdl-js-textfield extrawide">
                            <input class="mdl-textfield__input" name="content" type="text" id="sample1">
                            <label class="mdl-textfield__label" for="sample1">Add new Comment</label>
                        </div>
                        <input type='hidden' value='{{ item.id }}' name="gid">
                        <input type='hidden' value='{{ request.user.id }}' name="user">
                        <input type='submit' value='+' class='mdl-color--accent mdl-button mdl-button--fab'>
                    </form>
                {% else %}
                    <p>You must login to comment</p>
                {% endif %}
            </div>

            <div class="comment-block">
                {% for comment in comments %}
                {% for child_comment in comment %}
                    <hr>
                    <h5 class="">{{ child_comment.content }}</h5>
                    <small>via {{ child_comment.user }} | {{ child_comment.timestamp|timesince }} ago |
                        {% if child_comment.children.count > 0 %}{{ child_comment.children.count }} Comment
                            {% if child_comment.children.count > 1 %}s{% endif %} | {% endif %}   </small>
                {% endfor %}
                </div>

            {% endfor %}
            </div>


    </div>
{% endblock contentblock %}

{% block jsblock %}
    <script>
        $(document).ready(function () {
            $(".share1").click(function () {
                $.ajax({
                    method: "GET",
                    url: "twitter",
                    success: function (msg) {
                        $('.resp').html(msg.success);
                        $('.ent').html(msg.total);
                        $('.point').html("total entries by user "+msg.points);
                    },
                });
            });
            $(".share2").click(function () {
                $.ajax({
                    method: "GET",
                    url: "facebook",
                    success: function (msg) {
                        $('.resp').html(msg.success);
                        $('.ent').html(msg.total);
                        $('.point').html("total entries by user "+msg.points);
                    },
                });
            });
            $(".share3").click(function () {
                $.ajax({
                    method: "GET",
                    url: "google",
                    success: function (msg) {
                        $('.resp').html(msg.success);
                        $('.ent').html(msg.total);
                        $('.point').html("total entries by user "+msg.points);
                    },
                });
            });
            $(".share4").click(function () {
                $.ajax({
                    method: "GET",
                    url: "stumble",
                    success: function (msg) {
                        $('.resp').html(msg.success);
                        $('.ent').html(msg.total);
                        $('.point').html("total entries by user "+msg.points);
                    },
                });
            });
            $(".share5").click(function () {
                $.ajax({
                    method: "GET",
                    url: "linked",
                    success: function (msg) {
                        $('.resp').html(msg.success);
                        $('.ent').html(msg.total);
                        $('.point').html("total entries by user "+msg.points);
                    },
                });
            });

            console.log("readyyy")

        });


    </script>
{% endblock %}